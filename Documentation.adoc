:toc: left

:source-highlighter: prettify

// Macro definitions for this file only
:source: Documentation.adoc[Source Text]

include::MainMenu.adoc[]

Please click on the following links to refer the technical documentaion.

.More to Come
NOTE: Please keep checking this section frequently for more updates.

== Introduction
The following sections outlines the different options available while configuring an application.

== View Config Annotations

.View Components
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Component | Description |Attributes |Notes

|Page |Used to create a view page | Type - Home,Details,Form,Static |
Default value will be Home.

|Tile |Used to create a view Tile | Size - XSmall,Small,Medium,Large |
Default value will be Large.

|Section |Used to create a view Section. A section is encapsulated in a tile | Size - XSmall,Small,Medium,Large |
Default value will be Large.

|Form |Used to create a view Form to capture user responses. A forn is encapsulated in a section | |


|=========================================================

=== Accordion

.Accordion Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | Accordion |cannot be changed
|cssClass |String |  | css class override where default is 'panel-default'

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Accordion.java
----
@Accordion
private VASectionA_Questionnaire vaSectionA_Questionnaire;
----

NOTE: Accordion is supported only in a form

=== Button

.Button Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | Button |cannot be changed
|url |String |  | source url of the button element
|b |String | $execute | b
|method |String | GET | HTTP method that will be executed
|imgSrc |String |  | source path/ url of the image
|type |enum | Type.Plain| type of button
|payload |String |  | payload
|cssClass |String | btn btn-primary| class used to style the section
|formReset |boolean |true | reset the form

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Button.java
----
@Config(url="/pageAddEditGoal/tileEditGoal/sectionEditGoal/goalDetailsForm/_nav?pageId=pageCarePlanSummary")
@Button(type = Button.Type.DESTRUCTIVE)
private String delete;
----

NOTE: The possible enum values for size are *PRIMARY, SECONDARY, PLAIN, DESTRUCTIVE* +
_Please read @Config for information regarding @Config annotation._


=== ButtonGroup

.ButtonGroup Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | ButtonGroup |cannot be changed
|cssClass |String | text-sm-right| class used to style the section

|=========================================================


[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.ButtonGroup.java
----
@ButtonGroup
private FormGoalsButtonGroup formGoalsButtonGroup;
----

=== CardDetail

.CardDetail Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | CardDetail |cannot be changed
|cssClass |String | contentBox right-gutter bg-light mt-1 |class used to style the CardDetail
|imgSrc |String |  | source path/ url of the image
|editable |boolean |false | make the component editable
|modelPath |String |  |specify the model path for CardDetail
|title |String |  | specify the title of the CardDetail
|draggable |boolean |false | determine of the CardDetailsGrid is draggable

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.CardDetail.java
----
@CardDetail(title="Member Overview", cssClass="contentBox right-gutter bg-alternate mt-0")
private CardDetailMember cardDetailMember;
----

NOTE: *contentBox right-gutter bg-alternate mt-0* overrides the default cssClass specified for the CardDetail

==== CardDetail Children Components
CardDetail has several children components that nested level components can utilize to break the component into logical sections.

[source,java]
.CardDetailChildren.java
----
@Model
@Getter @Setter
public static class MyCard {
	
	@CardDetail.Header
	MyCardDetailTag myCardTag;
	
	@CardDetail.Body 
	MyCardDetailBody myCardBody;
}

@Model
@Getter @Setter
public static class MyCardDetailTag { ... }

@Model
@Getter @Setter
public static class MyCardDetailBody { ... }
----

===== CardDetail.Body

---

See the available CardDetail children components below:

.CardDetail.Body Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
| Name 			| Type		| Default 			| Description

| alias 		| String 	| CardDetailsBody 	| cannot be changed
| cssClass 		| String 	| 					| class used to style the component

|=========================================================

===== CardDetail.Footer

.CardDetail.Footer Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
| Name 			| Type		| Default 				| Description

| alias 		| String 	| CardDetailsFooter 	| cannot be changed
| cssClass 		| String 	| 						| class used to style the component

|=========================================================

===== CardDetail.Header

.CardDetail.Header Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
| Name 			| Type		| Default 				| Description

| alias 		| String 	| CardDetailsHeader 	| cannot be changed
| cssClass 		| String 	| 						| class used to style the component

|=========================================================

===== CardDetail.Tag

.CardDetail.Tag Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
| Name 			| Type		| Default 			| Description

| alias 		| String 	| CardDetailsTag 	| cannot be changed
| cssClass 		| String 	| 					| class used to style the component

|=========================================================

=== CardDetailsGrid

.CardDetailsGrid Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | CardDetailsGrid |cannot be changed
|editUrl |String |  |
|draggable |boolean |false | determine of the CardDetailsGrid is draggable
|onLoad |boolean |false | specify the behaviour of CardDetailsGrid during page load

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.CardDetailsGrid.java
----
@CardDetailsGrid(onLoad=true, draggable=true)
@Config(url="/pageHealthConcerns/tileHealthConcerns/sectionConcerns/concernsCards.m/_process?fn=_set&url=/p/cmcase/_search?fn=query&where=cmcase.id.eq('<!/.m/id!>')&project=/healthProblemsEnclosed")
@Path(linked=false)
private List<CardDetailConcerns> concernsCards;
----

NOTE: *onLoad=true* and *draggable=true* will override the default false values for onLoad and draggable respectively. +
_For information regarding @Config, please read View Configuration Annotations section_

=== CheckBox

.CheckBox Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | CheckBox |cannot be changed
|cssClass |String |  |class used to style the CheckBox
|labelClass |String | anthem-label |class used to style the CheckBox label
|postEventOnChange |boolean | false |post the value to the server onblur
|controlId |String |  |currently not in use except for assessments where this signifies the question number

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.CheckBox.java
----
@CheckBox(postEventOnChange=true)
private boolean admin;
----

NOTE: *postEventOnChange=true* will override the default false value of postEventOnChange.

=== CheckBoxGroup
CheckBoxGroup can be used for multi-select checkboxes.

.CheckBoxGroup Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | CheckBoxGroup |cannot be changed
|cssClass |String |  |class used to style the CheckBox
|labelClass |String | anthem-label |class used to style the CheckBox label
|postEventOnChange |boolean | false |post the value to the server onblur
|controlId |String |  |
|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.CheckBoxGroup.java
----
@CheckBoxGroup(postEventOnChange=true)
private String[] days;
----

NOTE: *postEventOnChange=true* will override the default false value of postEventOnChange.
*DataType* for checkboxgroup attribute should be *String[]* to hold multiple values.

=== ComboBox

.ComboBox Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | ComboBox |cannot be changed
|readOnly |boolean | false| make the component readonly
|labelClass |String | anthem-label| class used to style the label
|postEventOnChange |boolean | false| post the value to the server onblur
|controlId |String |  |currently not in use except for assessments where this signifies the question number

|=========================================================


[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.ComboBox.java
----
@Path
@Model.Param.Values(url="~/client/orgname/staticCodeValue/_search?fn=lookup&where=staticCodeValue.paramCode.eq('/goalCategory')")
@ComboBox
private String goalCategory;
----

NOTE: Please refer @Model in the core config annotations section.

=== Domain

.Domain Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|value |String |  |
|lifecycle |String |  |
|includeListeners |enum | |
|onLoad |boolean |false | specify the behaviour of CardDetailsGrid during page load

|=========================================================

NOTE: The possible enum values for includeListeners are *ListenerType.none, ListenerType.websocket, ListenerType.persistent, ListenerType.update*

_@Domain component is a part of view config as well as core config annotations._
The difference between the two is that @Domain annotation of view config does not persist any data
while @Domain annotation of core config persists data in MongoDB. +

View configuration @Domain annotation does not persist any data.
*value=Database.rep_none*  of @Repo specifies that a class with @Domain annotation does
not persist any data in database. +

For information about @Domain in core config, please refer to Core Config
Annotations section.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Domain.java
----
@Domain(value = "cmcaseview",includeListeners={ListenerType.websocket})
@MapsTo.Type(CMCase.class)
@Repo(value=Database.rep_none, cache=Cache.rep_device)
@Getter @Setter
public class VRCmCase {
}
----

=== FileUpload

.FileUpload Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String |FileUpload |Cannot be changed
|type |String |.pdf,.png  |comma separated list of file types user is allowed to upload

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.FileUpload.java
----
@FileUpload(type=".png,.pdf")
private String fileUpload;
----
The above configuration allows only ".png" and ".pdf" to be uploaded by the users.
 If they try to upload other file types, an error is thrown.

=== FilterButton
[width="80%",cols="4,^3,^3,10",options="header"]

A collection of buttons to operate with a configurable filter

|=========================================================
| Name 					| Type 		| Default 			| Description

| alias					| String 	| FilterButton		| cannot be changed
| b						| String 	| $execute 			| behavior to use
| cssClass				| String 	| btn btn-primary 	| class used to style the component
| imgSrc				| String 	| 		 			| source path/url of the image
| method				| String 	| GET	 			| HTTP method that will be executed
| url	 				| String 	| 					| source url to operate on

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.FilterButton.java
----
@FilterButton
private VFbAllTasks vFbAllTasks;

@Model @Getter @Setter
public static class VFbAllTasks {
	
	@Config(url="/vpHome/vtTasks/vsTasks/tasks.m/_process?fn=_set&url=/p/task/_search?fn=query&where=task.status.eq('Open')")     
	@Button(cssClass="btn btn-secondary btn-badge")
	private String vbOpenTasks;
}
----

TIP: Decorate complex classes with @FilterButton to define behavior for child elements (e.g. vbOpenTasks in the example above.)

=== Form

.Form Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | Form |cannot be changed
|submitUrl |String |  | url that will be hit after submit
|b |String | | b
|cssClass |String | | class used to style the section
|submitButton |boolean |true | form will be submitted
|navLink |String |  | navigation link

|=========================================================


[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Form.java
----
@Form(cssClass="twoColumn")
@Path(linked=false, state=State.External)
private FormGoalDetails goalDetailsForm;
----

=== Grid

.Grid Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | Grid |cannot be changed
|onLoad |boolean |false | specify the behaviour of CardDetailsGrid during page load
|isTransient |boolean |false | specify the behaviour of CardDetailsGrid during page load
|url |String |  |specify url for the Grid
|rowSelection |boolean |false | determine if row selection is enabled on the Grid
|pageSize |String | 10 |specify the page size for the Grid
|pagination |boolean |true | determine if pagination is enabled on the Grid
|postButton |boolean |false | determine if post Button is enabled on the Grid
|postButtonUrl |String |  |specify the url of post button for the Grid
|postButtonTargetPath |String |  |Target path for the multi select rows on the grid. The payload for the selections will be created based on this path.
|postButtonAlias |String |  | Button name alias for the multiselect action on the grid
|postEventOnChange |boolean | false |post the value to the server onblur

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Grid.java
----
@Grid
@MapsTo.Path(linked=false,state=State.External)
private List<SearchPatient> patientResult;
----
[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.GridWithMultiRowSelection.java
----
Provide the postButtonUrl based on the config.

@Grid(rowSelection=true,
postButtonUrl="/view/page/tile/section/remove",
postButton=true,
postButtonTargetPath="temp_ids",
postButtonAlias="Remove")

@Path("/members")
private List<VGGroupView> vgGroupList;

@Configs({
			@Config(url="/page/tile/section/vsRemoveList/_replace"),
			@Config(url="/page/tile/section/vgGroupList/<!col!>/.m/_process?fn=_setByRule&rule=updategroup", col="<!/vsRemoveList/temp_ids!>"),
			@Config(url="<!#this!>/../vgGroupList.m/_process?fn=_set&url=/p/group/_search?fn=query&project=/members")
		})
private String remove;

private VSRemoveList vsRemoveList;

@Getter @Setter
public static class VSRemoveList {		
	private List<String> temp_ids;
}
----

=== GridColumn

.GridColumn Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | GridColumn |cannot be changed
|hidden |boolean |false | Setting this to true will hide the column in the grid
|sortable |boolean |false | Enables sorting on the column
|filter |boolean | false |Setting this to true will enable a explicit filter component(Input TextBox) on the UI
|filterValue |String | | Default filterValue for a particular column.Can be used without setting filter attribute to restrict user from providing any other filter value.
|filterMode |String | equals |Mode to filter data within the column. It is defaulted to 'equals'.Current filter modes supported by the Grid component are listed as enum values - equals,contains,endsWith,in

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.GridColumn.java
----
@GridColumn(hidden=true,filterValue="false")
@Path private boolean active;
----

=== InputDate

.InputDate Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | InputDate |cannot be changed
|readOnly |boolean |false |hide/show the component
|labelClass |String | anthem-label |class used to style the label
|type |String | date |type of input date
|postEventOnChange |boolean | false |post the value to the server onblur
|controlId |String |  |currently not in use except for assessments where this signifies the question number

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.InputDate.java
----
@Path
@InputDate private LocalDate startDate;
----

=== Label
[width="80%",cols="4,^3,^3,10",options="header"]

A label component used to output descriptive text.

|=========================================================
| Name 					| Type 		| Default 		| Description

| alias 				| String 	| Label 		| cannot be changed

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Label.java
----
@Label
private String title;
----

=== Link
[width="80%",cols="4,^3,^3,10",options="header"]

A hyperlink component used for navigation or user interaction of text.

|=========================================================
| Name					| Type 			| Default 				| Description

| altText 				| String 		|  						| alternate text to be used
| b 					| String 		| $executeAnd$nav		| behavior to use
| cssClass				| String 		|  						| class used to style the component
| imgSrc 				| String 		|  						| source path/ url of the image
| method 				| String 		| GET 					| HTTP method that will be executed
| url 					| String 		| 		 				| source url to operate on
| value 				| Enum (Type)	| Type.Default			| classification of the link useful for determining functional behavior

|=========================================================

.Type.java
NOTE: The possible enum values for value are: *DEFAULT, MENU*.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Link.java
----
// UI Navigation to page vpHome under domain petclinic
@Link(url="/h/petclinic/vpHome")
private String linkToHome;

// Executes a request against _subscribe, and sets the image
@Link(url="/notifications/_subscribe:{id}/_process", b="$executeAnd$configAnd$nav" , method="POST") 
private String subscribeToEmailNotifications;
----

=== Menu
[width="80%",cols="4,^3,^3,10",options="header"]

A section intended to contain other navigation components.

|=========================================================
| Name					| Type 			| Default 				| Description

| alias					| String 		| 		 				| cannot be changed
| cssClass				| String 		|  						| class used to style the component
| value 				| Enum (Type)	| Type.CONTEXT			| classification of the link useful for determining functional behavior

|=========================================================

.Type.java
NOTE: The possible enum values for value are: *CONTEXT*.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Menu.java
----
// Defines a menu with elements home and signup
@Menu
private SideMenu sideMenu;

@Model @Getter @Setter
public static class SideMenu {
	@Link(url="#")
	private String home;
	
	@Link(url="#")
	private String signup;
}
----

TIP: Decorate complex classes with @Menu to define behavior for child elements (e.g. home and signup in the example above.)

=== Modal

.Modal Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | Modal |cannot be changed
|type |Type |  Type.dialog | types of modal can be a dialog or a slider. 

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Modal.java
----
@Modal
private VMMyTasks vmMyTasks;
----

NOTE: Modal is supported only in a tile


=== MultiSelect

.MultiSelect Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | MultiSelect |cannot be changed
|labelClass |String | anthem-label |class used to style the picklist label
|postEventOnChange |boolean | false |post the value to the server onblur

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.MultiSelect.java
----
@MultiSelect
@Model.Param.Values(url="Anthem/fep/icr/p/clientusergroup/_search?fn=lookup&projection.mapsTo=code:id,label:displayName")
@MapsTo.Path(value="/userGroups", colElemPath="/ownerId")
private List<String> userGroups;
----


=== MultiGrid

.MultiGrid Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | MultiGrid |cannot be changed
|level |String | 0 |class used to style the picklist label
|header |String | test | make the component readonly
|cssClass |String | question-header |class used to style the picklist
|postEventOnChange |boolean | false |post the value to the server onblur

|=========================================================


=== MultiSelectCard

.MultiSelectCard Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | MultiSelectCard |cannot be changed

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.MultiSelectCard.java
----
@MultiSelectCard @NotNull
@Model.Param.Values(url="~/client/orgname/cmprogram/_search?fn=lookup&projection.mapsTo=code:id,label:programName")
@Path(value="/programReferred", colElemPath="/programName")
private List<String> cmProgramList;
----

NOTE: @NotNull indicates that the component cannot be null.

=== Page

.Page Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | page |cannot be changed
|route |String |  | specify route of the page
|breadCrumb |String | none | specify breadCrumb of the page
|imgSrc |String |  | source path/ url of the image
|styleClass |String | | class used to style the section
|defaultPage |boolean | false | determine if the page will be the default page

|=========================================================

NOTE: The possible enum values for type are *HOME, DETAILS, FORM, STATIC*

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Page.java
----
@Page(route="cmcaseR/assignmenttaskview", defaultPage=true)
private Page_AssignmentTask pageAssignmentTask;
----

NOTE: *defaultPage=true* will override the default false value of defaultPage.

=== PickList

.PickList Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | PickList |cannot be changed
|labelClass |String | anthem-label |class used to style the picklist label
|readOnly |boolean |false | make the component readonly
|cssClass |String |  |class used to style the picklist
|postEventOnChange |boolean | false |post the value to the server onblur
|sourceHeader |String | SourceList | specify the source header for the picklist
|targetHeader |String | TargetList | specify the target header for the picklist

|=========================================================

=== Radio

.Radio Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | Radio |cannot be changed
|labelClass |String | anthem-label |class used to style the radio label
|level |String | 0 |determine the level of radio group
|cssClass |String |  |class used to style the radio
|postEventOnChange |boolean | false |post the value to the server onblur
|controlId |String |  |currently not in use except for assessments where this signifies the question number

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Radio.java
----
@Model.Param.Values(url="~/client/orgname/staticCodeValue/_search?fn=lookup&where=staticCodeValue.paramCode.eq('/thisIsParentQuestion14')")
@MapsTo.Path()
@Radio(postEventOnChange=true, controlId = "27")
private String thisIsParentQuestion14;
----

NOTE: *postEventOnChange=true* will override the default false value of postEventOnChange. +
*controlId* is used because in this particular case, there is a question number (27) that is associated with an assessment. +
Please refer Core Config Annotations section for @MapsTo

=== Section

.Section Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|value |enum | Type.Default| section type
|alias |String | Section |cannot be changed
|imgSrc |String |  | source path/ url of the image
|cssClass |String | | class used to style the section
|defaultFlow |String | | flow of the section

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Section.java
----
@Section
@Path(linked=false)
private SectionEditGoal sectionEditGoal;
----

NOTE: The possible enum values for size are *HEADER, FOOTER, LEFTBAR, RIGHTBAR, BODY, DEFAULT* +
defaultFlow attribute is applicable to section Type.Body only. +
_Please read @Path for more information on @Path._

=== TextBox

.TextBox Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | TextBox |cannot be changed
|hidden |boolean |false |hide/show the component
|readOnly |boolean |false |make the component readonly
|help |String | | help
|labelClass |String | anthem-label |class used to style the label
|type |String | text |type of input
|postEventOnChange |boolean | false |post the value to the server onblur
|controlId |String |  |currently not in use except for assessments where this signifies the question number

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.TextBox.java
----
@TextBox(hidden=true)
private String goalId;
----

TIP: In the above example, the default false value of hidden property will be overriden and the textbox will be hidden.
Similarly, other properties can be overriden by specifying the properties and its values along with @Textbox.

=== TextArea
[width="80%",cols="4,^3,^3,10",options="header"]

A text input component that allows for a specified number of rows.

|=========================================================
| Name 					| Type 		| Default 		| Description

| alias					| String 	| TextArea 		| cannot be changed
| controlId				| String 	| 				| currently not in use except for assessments where this signifies the question number
| help		 			| String 	| 				| help
| hidden	 			| boolean 	| false 		| hide/show the component
| labelClass	 		| String 	| anthem-label 	| class used to style the label
| postEventOnChange		| boolean 	| false 		| post the value to the server onblur
| readOnly	 			| boolean 	| false			| make the component readonly
| rows	 				| String 	| 5				| type of input
| type	 				| String 	| textarea		| type of input

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.TextArea.java
----
@TextArea
private String description;
----

=== Tile

.Tile Attributes
[width="80%",cols="3,^2,^2,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|alias |String | Tile |cannot be changed
|imgSrc |String |  | source path/ url of the image
|title |String | | title
|size |enum | Size.Large | size of the tile

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Tile.java
----
@Tile(size=Tile.Size.Large)
private TileEditGoal tileEditGoal;
----

NOTE: The possible enum values for size are *XSmall, Small, Medium, Large*

== Core Config Annotations

=== ActivateConditional

Activate Conditional is an extension capability provided by the framework. The annotation is used to conditionally activate/deactivate the param based on a SpEL condition.
This annotation can be triggered for multiple events. Framework provides default event handling for this annotation on StateChange and StateLoad. 

.ActivateConditional Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|when |String | |SpEL based condition to be evaluated relative to param's state on which this annotation is declared.
|targetPath|String[] | | Path of param to activate when condition is satisfied relative to param on which this annotation is declared. Multiple target paths can be given
|inactivateWhen|String | emptyString|SpEL based condition on which param would be inactivated.If value is not overridden, then the negation of ActivateConditional#when() would be used 
|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.ActivateConditional.java
----
@CheckBox(postEventOnChange=true)
@ActivateConditional(when="state != 'true'", targetPath="/../sectionG_skip")
private String skipSectionG;

private sectionG_Skip sectionG_skip;

@Radio(postEventOnChange=true)
@Model.Param.Values(value=YNType.class)
@ActivateConditional(when="state == 'No'", targetPath="/../q3Level2")
private String answerYesOrNo;
		
private Q3 q3Level2;

@CheckBoxGroup(postEventOnChange=true)
@Model.Param.Values(value=Days.class)
@ActivateConditional(when="state == new String[]{'Sunday'}",targetPath="/../../../sundayDeliverySection")
private String[] deliveryDays;

/*Check if selection contains one or more specific values*/
@CheckBoxGroup(postEventOnChange=true)
@Model.Param.Values(value=Days.class)
@ActivateConditional(when="state != null && state.?[#this=='Sunday'] != new String[]{}",targetPath="/../../../sundayDeliverySection")
private String[] deliveryDays;

@CheckBoxGroup(postEventOnChange=true)
@Model.Param.Values(value=VisitCount.class)
@ActivateConditional(when="state != null && state.length > 2",targetPath="/../../section")
private String[] visits;
----
Example SpEL expressions:
[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
//Contains single element:
@ActivateConditional(when="state != null && state.?[#this=='Apple'] != new String[]{}", targetPath = {"/../xyz","/../abc"})
//Contains exactly one single element:
@ActivateConditional(when="state == new String[]{'Apple'}", targetPath = {"/../xyz","/../abc"})
//Evaluate multiple or conditions
@ActivateConditional(when="state!=null && state.?[#this=='Apple' || #this=='Google'] != new String[]{}",targetPath="/../")

==== ActivateConditionals
@ActivateConditionals is a collection of ActivateConditional calls. 

.ActivateConditionals Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|value |ActivateConditional[] |  |

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.ActivateConditionals.java
----
	@ActivateConditionals({
		@ActivateConditional(when="state == 'A'", targetPath="/../q3Level1"),
		@ActivateConditional(when="state == 'B'", targetPath="/../q3Level2")
	})
	private String q3;
	private SampleCoreNestedEntity q3Level1;
	private SampleCoreNestedEntity q3Level2;
----
=== Config

.Config Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|url |String |  |

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Config.java
----
@Config(url="/pageAddEditGoal/tileEditGoal/sectionEditGoal/goalDetailsForm/_nav?pageId=pageCarePlanSummary")
@Button(type = Button.Type.PLAIN)
private String cancel;
----

A class with @Config annotation is used to perform an action on button click.
In most cases, the action is to retrieve values via HTTP Rest calls
from database (MongoDB), and display on the web page. +

In the example shown above, when the button is clicked, the control will be navigated to the specified url. +
_nav_ is the http call for navigation. +

The possible Actions are: - +

 - get for HTTP GET
 - new for HTTP post
 - update for HTTP update
 - delete for HTTP delete
 - search for searching
 - nav for navigation
 - process for custom process/ work-flow definitions


==== Configs

.Configs Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|values |Config[] |  |

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Configs.java
----
@Configs({
@Config(url="~/client/org_name/_update"),
@Config(url="~/client/org_name/_process?fn=_set&url=/p/cmcase/_search?fn=query&where=cmcase.patientReferred.firstName.eq('<!/.m/patientReferred/firstName!>').and(cmcase.patientReferred.lastName.eq('<!/.m/patientReferred/lastName!>'))"),
@Config(url="~/client/org_name/_nav?pageId=vpAdvancedCaseSearch")
		})
@Button(type=Button.Type.PRIMARY, formReset=false)
private String submit;
----

@Configs is a collection of configuration calls. Multiple calls to the database
can be made simultaneously using @Configs, where each call will be represented by @Config. +

As shown in the example, when the submit button is clicked, three http calls that are being made viz.
update, process, and navigation.

=== ConfigConditional
ConfigConditional is an extension capability provided by the framework. The annotation is used to conditionally execute @Config calls based on a SPel based condition.
This annotation can be triggered for multiple events. Framework provides default event handling for this annotation on StateChange. 

.ConfigConditional Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|when |String | |SpEL based condition to be evaluated relative to param's state on which this annotation is declared.
|config|Config[] | emptyString| Array of @Configs
|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.ConfigConditional.java
----
@ConfigConditional(
	when = "state == 'Completed'", config = {
	@Config(url="<!#this!>/../state/_update?rawpayload=\"Closed\""),
	@Config(url="/p/dashboard/_get")				
})	
private String status;
----
NOTE: In the above example , whenever there is statechange of status and the status is changed to *Completed*, the Configs will be executed.

=== Domain

Core Config configuration @Domain annotation persists data. +

Core config @Domain will always be followed by @Repo that will specify the way data is persisted. +

*includeListeners={ListenerType.persistence, ListenerType.update}* of @Domain
specifies that the data will be persisted. +
*value=Database.rep_mongodb* of @Repo specifies that a class with
@Domain annotation will use MongoDb for persistence.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Domain.java
----
@Domain(value="cmcase", includeListeners={ListenerType.persistence, ListenerType.update})
@Repo(value=Database.rep_mongodb, cache=Cache.rep_device)
public class CMCase extends IdString {
}
----

NOTE: Please read @Repo for mroe information regarding @Repo annotation.

=== MapsTo

==== Path

.Path Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|value |String |  |specify value of Path
|colElemPath |String | DEFAULT_COL_ELEM_PATH | specifies column element path
|state |State | State.Internal | specifie path state
|linked |boolean |true | determine if the path has links
|cache |Cache | Cache.rep_device | specifies cache type

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Path.java
----
@Path()
private Long version;
----


==== Type

.Type Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|value |class<?> | |
|silent |boolean | true |determines if Type is silent

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Type.java
----
@MapsTo.Type(CMCase.class)
public static class SectionEditGoal  {
    }
----

NOTE: If it is not mapped _(@Mapped)_, an exception will be thrown. +
If no exception is thrown, defaults to silent.


=== Model

==== Param

.Param Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|value |Class<? extends Source> | Source.class |specify value of Path
|url |String | staticCodeValue | specifies url

|=========================================================

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Param.java
----
@Model.Param.Values(url="~/client/orgname/staticCodeValue/_search?fn=lookup&where=staticCodeValue.paramCode.eq('/thisIsParentQuestion14')")
@Radio(postEventOnChange=true, controlId = "27")
private String thisIsParentQuestion14;
----

NOTE: The example will retrieve the value of Radio button from the specified url. +
*staticCodeValue* is a collection in MongoDB that will be searched and retrieved using @Model annotation.
The search criteria is specified using param code _thisIsParentQuestion14_


==== Text

.Text Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description

|label |String | |

|=========================================================

=== Repo

.Repo Attributes
[width="80%",cols="4,^3,^3,10",options="header"]
|=========================================================
|Name | Type |Default |Description
|alias |String | | cannot be changed
|value |enum |  |specify value of Path
|cache |enum | Cache.rep_device | specifies cache type
|autoSave |boolean |true | determine if the autosave is enabled

|=========================================================

NOTE: The possible enum values for value are *DATABASE.rep_none, DATABASE.rep_rdbms, DATABASE.rep_mongodb, DATABASE.rep_ws* +
The possible enum values for cache are *CACHE.rep_none, CACHE.rep_device*

@Repo is used to determine where the data will be persisted. It is always used along with @Domain. +

==== rep_mongodb

The following example shows how data is persisted/ retrieved using MongoDB as a source. 

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Repo.java
----
@Domain(value="cmassessment", includeListeners={ListenerType.persistence})
@Repo(alias="cmassessment",value=Database.rep_mongodb, cache=Cache.rep_device)
@Getter @Setter
public class CMAssessment extends IdString {
}
----

==== rep_ws

Databse values can be persisted/ retrieved not only using internal MongoDb as a source, we can now use an external web service for the same purpose.
All we have to do is create a REST call to a web service that will provide or store the data. Following is an example: -

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.ExtClient.java
----
@Domain(value="ext_client")
@Repo(value=Database.rep_ws, cache=Cache.rep_device)
@Getter @Setter @ToString(callSuper=true)
public class ExtClient {

}
----

Notice *@Repo(value=Database.rep_ws)* in the code above. This indicates that it will make use of an external web service call rather than
a MongoDb call for ExtClient data objects' persistence/ retrieval purposes.

The advantage of this feature is that now we do not rely on internal source only. This gives us better flexibility and maintainability

== UI Validation Messages through JSR Annotations

Framework has the ability to send custom validation messages to the UI from the server and they can be put within JSR Annotations.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Repo.java
----
@NotNull(message = "First name should not be empty.")
private String status;
----

Here, if the UI field 'status' is left blank by the user, "First name should not be empty" message would be displayed. @NotNull will just display the default message.

== Layout Configuration


As you can see in the screenshot above, the layout of the application is
divided into 3 sections viz. Header, Footer, and Leftbar. Please read the code
below to understand the way the sections has been created.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Repo.java
----
public static class VPHome {

@Section(Type.HEADER)
private VSHomeHeader vsHomeHeader;

@Section(Type.LEFTBAR)
private VSHomeLeftBar vsHomeLeftBar;

@Section(Type.FOOTER)
private VSHomeFooter vsHomeFooter;

	}
----

NOTE: @Section(Type.*_value_*) determines the section on the page. This code shows
three of the _type_ values for @Section. For more values, please refer to the @Section
annotation within View Config Annotations.


== Collection Configuration

Collection configuration is introduced in the framework to eliminate the creation and use of different functional handlers for adding, editing and deleting 
elements from/ to a collection. This structure now gives us the ability to work on any of these functions on any of the elements from a collection at any given time.

This configuration is explained using a use case of a Car. A user might want to see a Car home page that has list of cars. User may be able to add, edit, or delete
cars and also view properties of car. The first step is to create a core domain entity.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.CarEntity.java
----
@Domain(value="Car", includeListeners={ListenerType.persistence})
@Repo(Database.rep_mongodb)
@Getter @Setter
public class CarEntity extends IdString {

	private String attr_String;
	
	private int attr_int;
	private Integer attr_Integer;
	
	private CarNestedEntity attr_CarNestedEntity;
	
	private List<CarNestedEntity> attr_list_2_CarNestedEntity;

	}
----

This configuration provides us with the flexibility such that we can define a custom set of car features to be displayed. The features are defined in the 
nested entity as shown in the code below: -

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.CarNestedEntity.java
----
@Model
@Getter @Setter
public class CarNestedEntity {
	
	private String car_name;
}
----

The following class defines the home page that will show a list of cars. Notice the way in which the nested entities are mapped to its property.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.VPCarHome.java
----
@MapsTo.Type(CarEntity.class)
@Getter @Setter
public class VPCarHome {

	@Tile(title="Car Home", size=Tile.Size.Large) 
	private TileBlue tile;	
	
	@MapsTo.Type(CarEntity.class)
	@Getter @Setter
	public static class TileBlue {
		
		// add new Nested Entity
		@Configs(
			@Config(url="/page_red/tile/vt_attached_convertedNestedEntity/_get?fn=param&expr=assignMapsTo('../.m/attr_list_2_CarNestedEntity')")	
		)
		private String addButton;

		// view/edit mapped collection to core
		@Path(value="/attr_list_2_CarNestedEntity")
		private List<Section_ConvertedNestedEntity> vm_attached_convertedList;

    }
	
	@MapsTo.Type(CarNestedEntity.class)
	@Getter @Setter
	public static class Section_ConvertedNestedEntity {
		
		// assigning collection element of core to Form
		@Configs(
			@Config(url="/page_red/tile/vt_attached_convertedNestedEntity/_get?fn=param&expr=assignMapsTo('/.d/<!#this!>/../.m')")
		)
		private String editButton;
		
		@Path("/car_name")
		private String vm_car_name;
	}

}
----

As you can see, when you click on addButton, the config url will follow the domain model path until the form view where a user can save the new car (nested entity),
and then switch from view config to core config using .m to assign a new car to attr_list_2_CarNestedEntity list.
The Section_ConvertedNestedEntity is a nested entity that is used to view/ edit collection that is mapped to core, using edit button and vm_car_name respectively.
The edit button that has a config url that will be resolved in a similar way to that of add button, however, as you can see, there is a .d that signifies the 
mapping to the core domain model i.e. it will point to the root which is CarEntity.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.VPCarDetails.java
----
@MapsTo.Type(CarEntity.class)
@Getter @Setter
public class VPCarDetails {

	@Tile(title="Car Details", size=Tile.Size.Large) 
	private TileRed tile;	
	
	@MapsTo.Type(CarEntity.class)
	@Getter @Setter
	public static class TileRed {
	
		@Path(value="/attr_list_2_CarNestedEntity", nature=Nature.TransientColElem)
		private Form_ConvertedNestedEntity vt_attached_convertedNestedEntity;
	}
	
	@MapsTo.Type(CarNestedEntity.class)
	@Getter @Setter
	public static class Form_ConvertedNestedEntity {
		
		@Configs(
			@Config(url="<!#this!>/../_update")	
		)
		private String saveButton;
		
		@Configs({
			@Config(url="<!#this!>/../.m/_delete"),
			@Config(url="<!#this!>/../_get?fn=param&expr=unassignMapsTo()")	
		})
		private String deleteButton;
		
		@Path("/car_name")
		private String vt_car_name;
	}
	
}
----

This is the car details page that will be displayed when user clicks on add/ edit button from the Home page. This is used to create another nested entity,
however, please notice *nature=Nature.TransientColElem*. This property is used to determine that Form_ConvertedNestedEntity have transient relationship
with the Car (core entity). Form_ConvertedNestedEntity will display the car property (car name) and two buttons viz. save and delete to perform add/edit and 
delete functions respectively.

Hence, by using the collection configuration, we can eliminate the use of add/edit/delete custom functional handlers to perform add/edit/delete functions respectively.


== Rule Configuration

.Framework comes with support for Drools Rules (https://www.drools.org/) engine out of the box. The rules can be defined at multiple levels.
* Entity Level: Rules defined at the entity level gets triggered everytime the entity is updated. Typically business rules that manage the entity state would be defined at this level. The framework would pick any rule with the extension <domainalias>.drl and associate with the entity updates. The rule would have access to the entity domain that it is being executed.
* Function Handler: Business rules that can span across multiple entities or needs to be controlled based on business flow rather than everytime entity is updated can be configured using Function handler. Please refer to the Function Hanlder documentation for more information on configuring these rules.
* Attribute Level : Activation and deactivation at attribute level based on certain conditions can be handled using @ActivateConditional annotation. Please refer to the annotation details <<ActivateConditional, here>>.

== Audit
.Framework has the ability to create an Audit Configuration for leaf parameters to generate audit history on state change of the annotated parameter.
When a leafParam is annotated with @Audit, based on the event handler defined for the annotation, the audit history is created for that particular leafParam.
By default, the @Audit functionality is invoked for OnStateChange event handlers.

Usage : @Audit(AuditHistory.class)

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.Car.java
----
@Audit(SampleCarAuditEntry.class)
private String audit_String;

@Audit(SampleCarAuditEntry.class)
private Integer audit_Integer;
	
@Audit(SampleCarAuditEntry.class)
private String unmapped_String;

----

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.VPCar.java
----
@Audit(SampleCarAuditEntry.class)
@Path
private String audit_String; // mapped and marked with Audit on both view & core	

@Audit(SampleViewCarAuditEntry.class)
private String unmapped_String; // unmapped and marked with Audit on a quad with persistent core

@Path
private Integer audit_Integer; // mapped view to a core which is annotated with Audit
		
----
As you can see @Audit can be annotated on both view and core entities.

== Process Configuration

=== Business Process Configuration
include::BPMConfiguration.adoc[]

=== Function Handlers
*Function Handlers* are an abstraction within the framework to execute a common set of instructions for a given *Action*.

Given an action, a particular function handler can be executed by specifying a value for the query parameter *fn*.

.Example configuration for a _set function handler
[source,java]
@Config(url="/p/patient:<!/.m/id!>/_process?fn=_set")

In the example above, *_process* is the *Action* and *_set* is the Function Handler we have configured to execute as a part of this *@Config* configuration.

==== Predefined Function Handlers

There are several default function handlers defined within the core framework to handle common framework instructions, such as setting the state of a parameter (*_set*) or adding a parameter value into a collection (*_add*).

The following function handlers are provided out-of-the-box:

.Predefined Function Handlers
[options="header", cols="1, 1, 4"]
|=========================================================
| Handler 			| Action		| Description

| _param			| _get			|
| _default			| _nav			|
| _initEntity		| _new			|
| _add				| _process		| Adds parameter value to a collection.
| _addCollection	| _process		|
| _bpm				| _process		| Invokes a statless bpm process.
| _eval				| _process		| 
| _set				| _process		| Sets parameter value.
| _setByRule		| _process		| Set parameter value through a rule.
| _example			| _search		|
| _lookup			| _search		|
| _query			| _search		|

|=========================================================

==== Custom Function Handlers

The framework provides the ability to users to define custom function handlers.

To create a custom function handler, create a *@Bean* to be injected in the spring context which implements *FunctionHandler* class from the framework.
Below are two samples for creating custom handlers.

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.PetClinicExtensionConfig.java

@Configuration
public class PetClinicExtensionConfig {
	@Bean(name="default._process$execute?fn=_custom")
	public CustomFunctionHandler<?,?> setCustomFunctionHandler(BeanResolverStrategy beanResolver) {
		return new CustomFunctionHandler<>(beanResolver);
	}
	@Bean(name="petclinic._process$execute?fn=_setByRule")
	public SetByRuleFunctionHandler<?,?> setByRuleFunctionHandler() {
		return new SetByRuleFunctionHandler<>();
	}
}

Custom implementation example:

[[app-listing]]
[source,java,indent=0]
[subs="verbatim,attributes"]
.CustomFunctionHandler.java

public class CustomFunctionHandler<T,S> implements FunctionHandler<T,S> {
	public CustomFunctionHandler(BeanResolverStrategy beanResolver) {}
	@Override
	public S execute(ExecutionContext eCtx, Param<T> actionParameter) {
		/*
		 * Add custom function handler logic here
		 */
		return null;
	}
}

Usage: *@Config(url="/vpOwners/vtOwners/vsSearchOwnerCriteria/vfSearchOwnerCriteria/vbgSearchOwner/_process?fn=_custom")*

.Notes
* Naming convention for the bean name should to be followed for the custom function handler to be recognized by the framework - *<default>._process$execute?fn*
* <default> is used for the default implementation of framework.
It can be overwritten by specific implementations of the function handler by replacing <default> with ex. petclinic

include::Querydsl.adoc[]

== View Configuration
include::ViewConfiguration.adoc[]

== Infrastructure
image::application-setup.jpeg[Infrastructure]



